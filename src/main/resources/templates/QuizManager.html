<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.springframework.org/schema/data/jaxb http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>QuizManager</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet" th:href="@{/css/bootstrap.min.css}" type="text/css"/>
    <link href="/css/bootstrap.css" rel="stylesheet" th:href="@{/css/bootstrap.css}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body style="background-color:aquamarine">

<div class="form-popup" style="display:none;" id="popupForm">
    <div>
        <div style="background-color:gray;
            position: fixed;
            z-index: 3;">
            <input id="clipboard" type="text">
            <button type="button" class="btn`" onclick="copyToClipboard()" id="copyBtn" value="Copy">Copy</button><br>
            <button type="button" onclick="popupForm_Close()" class="btn">Close</button>
        </div>
    </div>

</div>
<div style="z-index:1">
    <p th:text="${RetMessage}"></p>
    <h2>Quiz management</h2>
    <table class="table align-middle mb-0 bg-white">
        <tr>
            <form th:action="@{addQuiz}">
                <button type="submit" class="btn btn-rounded">Add</button>
            </form>
        </tr>
        <thead class="bg-light">
        <tr>
            <th>Name</th>
            <th>Is Active</th>
            <th>State</th>
            <th>Category</th>
            <th>Vote</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="quiz:${qList}">
            <td>
                <div class="d-flex align-items-center">
                    <div class="ms-3">
                        <p class="fw-bold mb-1" th:text="${quiz.getName()}"></p>
                    </div>
                </div>
                <link>
            </td>
            <td>
                <p class="fw-normal mb-1" th:text="${quiz.isActive()}"></p>
            </td>
            <td>
                <span class="badge badge-success rounded-pill d-inline" th:if="${quiz.getState().getId()==3}">Banned</span>
                <span class="badge badge-primary rounded-pill d-inline" th:if="${quiz.getState().getId()==1}">Private</span>
                <span class="badge badge-warning rounded-pill d-inline" th:if="${quiz.getState().getId()==2}">Public</span>
            </td>
            <td th:text="${quiz.getCategory().getCategoryName()}">
            </td>
            <td th:text="${quiz.getVote()}"></td>
            <td>
                <div style="display:inline-block" th:unless="${quiz.getState().getId()==3}">
                    <form th:action="@{edit}">
                        <button type="submit" class="btn btn-link btn-sm btn-rounded" th:name="id"
                                th:value="${quiz.getId()}" style="display:inline;">
                            <i class="fa fa-edit"></i>
                        </button>
                    </form>
                </div>
                <div style="display:inline-block" th:unless="${quiz.isActive()==True}">
                    <form th:action="@{delete}">
                        <button type="submit" class="btn btn-link btn-sm btn-rounded" th:name="id"
                                th:value="${quiz.getId()}">
                            <i class="fa fa-trash"></i>
                        </button>
                    </form>
                </div>
                <div style="display:inline-block" th:unless="${quiz.getState().getId()==3}">
                    <form>
                        <button type="button" class="btn btn-link btn-sm btn-rounded"
                                th:onclick="'shareForm('+${quiz.getId()}+');'"><i class="fa fa-share"></i>
                        </button>
                    </form>

                </div>
                <div style="display:inline-block" th:if="${quiz.getState().getId()==3}">
                    <form>
                        <button type="button" class="btn btn-link btn-sm btn-rounded"
                                th:onclick=""><i class="fa-solid fa-comment-dots"></i>
                        </button>
                    </form>
                </div>

            </td>
        </tr>
        </tbody>
    </table>
</div>
<script>

    function shareForm(p1) {
        document.getElementById("popupForm").setAttribute("style", "position: fixed;display: block;width: 100%;padding:30%; height: 100%;top:0;left: 0;right:0;bottom: 0;z-index: 2;");
        document.getElementById("clipboard").value=p1;

    }
    function popupForm_Close() {
        document.getElementById("popupForm").setAttribute("style", "display: none;");
    }

    function copyToClipboard() {
      // Get the text field
      var copyText = document.getElementById("clipboard");

      // Select the text field
      copyText.select();
      copyText.setSelectionRange(0, 99999); // For mobile devices

       // Copy the text inside the text field
      navigator.clipboard.writeText(copyText.value);
      document.getElementById("copyBtn").innerHtml="Copied";

}

</script>
<script src="https://kit.fontawesome.com/99b46135b5.js" crossorigin="anonymous"></script>
</body>

</html>